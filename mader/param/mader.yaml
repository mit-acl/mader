use_ff: true # use feedforward
visual: true #publish visualization stuff
color_type: "vel" #"vel" or "plain"
n_agents: 16 #only used for the color visualization

dc: 0.01            #(seconds) Duration for the interpolation=Value of the timer pubGoal
goal_radius: 0.05    #(m) Drone has arrived to the goal when distance_to_goal<GOAL_RADIUS
drone_radius: 0.05  #(m) Used for collision checking

w_max: 1.0           # [rd/s] Maximum angular velocity. 0.4 for Hardware
alpha_filter_dyaw: 0 #was 0.92  #[] Filter parameter for dyaw, \in [0,1]. Higher--> More aggressive filtering

##########################################
##Needed: Ra <= fov_depth  <= R_local_map
##Agents/obstacles from which I am allowed to receive information:
# impose_fov: false
# R_local_map: 5.5 #[m] Trajectories from obstacles/agents whose center falls inside this local map are stored

#####Only used if impose_fov==true
# fov_horiz_deg: 100 #[deg] \in (0,180] ,  angle between two faces of the tetrahedron 
# fov_vert_deg: 100 #[deg] \in (0,180] ,  angle between two faces of the tetrahedron 
# fov_depth: 4.5 #[m] Should be < Ra

#####If impose_fov==false
#R_consider_agents: 900       # [m] Other agents are considered if they are closer than Rothers. Should be >=2*Ra (because this ensures that the other agent hasn't planned a trajectory that enters my sphere of radius Ra)
#R_consider_obstacles: 7.0    # [m] Other obstacles are considered if they are closer than Rothers.
##########################################

Ra: 4.5           # [m] Radius of my planning sphere (planning horizon). Should be < fov_depth

x_min: -1000000000.0  # [m] don't forget the .0
x_max: 10000000000.0  # [m] don't forget the .0

y_min: -1000000000.0  # [m] don't forget the .0
y_max: 1000000000.0 # [m] don't forget the .0

z_ground: -10.0         #[m] points below this are considered ground
z_max: 4.5         #[m] JPS is not allowed to give a solution that goes higher than this height

#For multi-agent simulations
v_max: [2.5, 2.5, 2.5]   #[m/s]  
a_max: [30.0, 30.0, 9.6]   #[m/s2] 


#For single-agent simulations
# v_max: [5.0, 5.0, 5.0]   #[m/s]  7.0
# a_max: [20.0, 20.0, 9.6]   #[m/s2] Note that if a_max.z() > 9.81, the drone may flip



factor_alpha: 1.5 #[-] DeltaT = factor_alpha*States_took_previous_replan

#Parameters for NLOPT
num_pol: 3
deg_pol: 3
weight: 1000.0 #The .0 is needed #10000  #1000000
epsilon_tol_constraints: 0.000001
xtol_rel: 0.0000000000001 #negative value --> stopping criterion not used
ftol_rel: 0.0000000001 #negative value --> stopping criterion not used
solver: "LD_MMA"

# LD_CCSAQ: really good
# LD_MMA: only improves over the initial guess if it runs for a lot of time NOT TRUE
# LN_NELDERMEAD: good, but doesn't seem to improve over the initial guess
# LD_LBFGS: good
# LD_VAR2: good
# LD_AUGLAG: good
# LD_SLSQP: sometimes it calls the obj_function and the constraints functions very few times. This leads to MUCH higher comp times than max_runtime (\implies A is published by then)

#  // work:  / LN_SBPLX //LN_PRAXIS  //LD_AUGLAG_EQ //
#  // don't work: LN_BOBYQA //  //LN_NEWUOA //LN_NEWUOA_BOUND //LN_COBYLA //LD_CCSAQ
#  // crash://LD_TNEWTON_PRECOND_RESTART //LD_TNEWTON_RESTART //LD_TNEWTON_PRECOND //LD_VAR1  //LD_LBFGS_NOCEDAL //

# //COBYLA

# kappa + mu <=1 Ideally kappa + mu<1 (so that there is time for other stuff)
upper_bound_runtime_snlopt: 0.35 #[seconds] snlopt (init guess + solver) will never take longer than this amount of seconds
lower_bound_runtime_snlopt: 0.01 #[seconds] snlopt (init guess + solver) will never take less than this amount of seconds
kappa: 0.5 #% of time spent to find initial guess
mu: 0.15    #% of time spent to solve the optimization

# Samples in velocity for the A* guess used in the nlopt optimization problem
a_star_samp_x: 5
a_star_samp_y: 5 
a_star_samp_z: 5 
a_star_fraction_voxel_size: 0.0 #\in [0,1] The higher, the bigger the voxel size in A* is(i.e. more prunning)
allow_infeasible_guess: true  #whether allow infeasible guesses to be used for the optimization. If false, straight line guess will be used in the case of an infeasible guess

a_star_bias: 7.0 #Bias (cost=g+bias*h) in the A* search 

basis: "MINVO"  #MINVO OR B_SPLINE or BEZIER This is the basis used only for collision checking

res_plot_traj: 15.0  #Higher --> More resolution when plotting the trajectory 

factor_v_max: 1.0 #\in [0,1]. Used to find the total duration of a given trajectory.

alpha_shrink: 0.9 #\in [0,1] Only used for MINVO/Bezier


alpha: 0.05 #[m] Error in position
beta: 0.03 #[m] Deviation between the trajectory and the segment between two discretization points
gamma: 0.1 #[seconds] >0 Time step between discretization points

